import{d as v}from"./default-59bf48ce.js";import{C,U as D}from"./ckeditor-adapter-8431b299.js";import{_ as N,e as A,w as s,r as a,o as n,a as o,b as m,c as _,g as h,d as b,t as B,f as E}from"./app-cc8f7264.js";const I=new v("categories"),d=new v("blogs"),S={data(){return{editor:C,editorConfig:{extraPlugins:[function(e){e.plugins.get("FileRepository").createUploadAdapter=t=>new D(t)}]},categories:[],otherVideos:[],breadcrumbs:[{title:"Dashboard",to:{name:"auth.panel"},disabled:!1,exact:!0},{title:"Blogs",exact:!0,disabled:!1,to:{name:"auth.blogs.listing"}}],form:{category_id:[],title:"",slug:"",description:"",long_description:"",image:void 0,detail_image:void 0,is_active:!0,is_featured:!0,id:0},loading:!1,errors:{category_id:[],description:"",slug:"",long_description:"",title:[],image:[],detail_image:[]}}},methods:{async insertRecord(){this.resetErrors(),this.loading=!0;var e=new FormData;if(e.append("title",this.form.title),this.form.image&&e.append("image",this.form.image[0]),this.form.detail_image&&e.append("detail_image",this.form.detail_image[0]),e.append("description",this.form.description),e.append("long_description",this.form.long_description),e.append("slug",this.form.slug),e.append("category_id",JSON.stringify(this.form.category_id)),e.append("is_active",this.form.is_active==!0?1:0),e.append("is_featured",this.form.is_featured==!0?1:0),this.form.id>0){e.append("id",this.form.id);var t=await d.update(e,this.form.id)}else var t=await d.create(e);t.status?this.$router.push({name:"auth.blogs.listing"}):(t.data.category_id&&(this.errors.category_id=t.data.category_id),t.data.title&&(this.errors.title=t.data.title),t.data.slug&&(this.errors.slug=t.data.slug),t.data.description&&(this.errors.description=t.data.description),t.data.long_description&&(this.errors.long_description=t.data.long_description),t.data.image&&(this.errors.image=t.data.image),t.data.detail_image&&(this.errors.detail_image=t.data.detail_image)),this.loading=!1},resetErrors(){this.errors={category_id:[],image:[],detail_image:[],slug:[],description:[],long_description:[],title:[]}}},watch:{"form.title":function(){var e=this.form.title;e=e.toLowerCase(),e=e.replace(/[^a-zA-Z0-9]+/g,"-"),this.form.slug=e}},async mounted(){if(this.categories=await I.getlist("").then(t=>t.data),this.otherVideos=await d.getlist("").then(t=>t.data),this.$route.params.id){this.form.id=this.$route.params.id,this.breadcrumbs.push({title:"Edit",exact:!0,disabled:!0,to:{name:"auth.blogs.add",params:{id:this.$route.params.id}}});var e=await d.get(this.$route.params.id);this.res=e,this.form={title:e.title?e.title:"",slug:e.slug?e.slug:"",description:e.description?e.description:"",long_description:e.long_description?e.long_description:"",category_id:e.category_id?JSON.parse(e.category_id):[],is_active:e.is_active!=0,is_featured:e.is_featured!=0,id:this.$route.params.id,parent_id:0}}else this.breadcrumbs.push({title:"Add",exact:!0,disabled:!0,to:{name:"auth.blogs.add"}})}},F=b("mdi-forward"),R={key:0},T=["src"],z={key:0},q=["src"];function J(e,t,O,L,i,V){const u=a("v-icon"),y=a("v-breadcrumbs"),l=a("v-col"),g=a("v-text-field"),c=a("v-file-input"),w=a("v-select"),U=a("v-textarea"),k=a("ckeditor"),f=a("v-checkbox"),x=a("v-btn"),p=a("v-row");return n(),A(p,null,{default:s(()=>[o(l,{cols:"12"},{default:s(()=>[o(y,{items:i.breadcrumbs},{prepend:s(()=>[o(u,{size:"small",icon:"mdi-home-city"})]),divider:s(()=>[o(u,null,{default:s(()=>[F]),_:1})]),_:1},8,["items"])]),_:1}),o(l,{cols:"12"},{default:s(()=>[m("form",{onSubmit:t[9]||(t[9]=E((...r)=>e.submit&&e.submit(...r),["prevent"]))},[o(p,null,{default:s(()=>[o(l,{cols:"6"},{default:s(()=>[o(g,{modelValue:i.form.title,"onUpdate:modelValue":t[0]||(t[0]=r=>i.form.title=r),counter:255,label:"Title",required:"","error-messages":i.errors.title},null,8,["modelValue","error-messages"])]),_:1}),o(l,{cols:"6"},{default:s(()=>[o(g,{modelValue:i.form.slug,"onUpdate:modelValue":t[1]||(t[1]=r=>i.form.slug=r),counter:255,label:"Slug",required:"","error-messages":i.errors.slug},null,8,["modelValue","error-messages"])]),_:1}),o(l,{cols:"6"},{default:s(()=>[o(c,{accept:"image/*",modelValue:i.form.image,"onUpdate:modelValue":t[2]||(t[2]=r=>i.form.image=r),label:"Thumbnail","error-messages":i.errors.image},null,8,["modelValue","error-messages"]),e.res&&e.res.image?(n(),_("div",R,[m("img",{width:"100",src:e.res.image_url},null,8,T)])):h("",!0)]),_:1}),o(l,{cols:"6"},{default:s(()=>[o(c,{accept:"image/*",modelValue:i.form.detail_image,"onUpdate:modelValue":t[3]||(t[3]=r=>i.form.detail_image=r),label:"Detail Image","error-messages":i.errors.detail_image},null,8,["modelValue","error-messages"]),e.res&&e.res.detail_image?(n(),_("div",z,[m("img",{width:"100",src:e.res.detail_image.full_url},null,8,q)])):h("",!0)]),_:1}),o(l,{cols:"6"},{default:s(()=>[o(w,{multiple:"","error-messages":i.errors.category_id,"item-title":"name","item-value":"id",label:"Category",items:i.categories,modelValue:i.form.category_id,"onUpdate:modelValue":t[4]||(t[4]=r=>i.form.category_id=r)},null,8,["error-messages","items","modelValue"])]),_:1}),o(l,{cols:"6"},{default:s(()=>[o(U,{counter:255,label:"Description","no-resize":"",rows:"1",modelValue:i.form.description,"onUpdate:modelValue":t[5]||(t[5]=r=>i.form.description=r)},null,8,["modelValue"])]),_:1}),o(l,{cols:"12",sm:"12",md:"12"},{default:s(()=>[o(k,{editor:i.editor,modelValue:i.form.long_description,"onUpdate:modelValue":t[6]||(t[6]=r=>i.form.long_description=r),config:i.editorConfig},null,8,["editor","modelValue","config"])]),_:1}),o(l,{cols:"3"},{default:s(()=>[o(f,{modelValue:i.form.is_active,"onUpdate:modelValue":t[7]||(t[7]=r=>i.form.is_active=r),label:"Is Active?"},null,8,["modelValue"])]),_:1}),o(l,{cols:"3"},{default:s(()=>[o(f,{modelValue:i.form.is_featured,"onUpdate:modelValue":t[8]||(t[8]=r=>i.form.is_featured=r),label:"Is Featured?"},null,8,["modelValue"])]),_:1}),o(l,{cols:"12"},{default:s(()=>[o(x,{onClick:V.insertRecord,disabled:i.loading,loading:i.loading,"loading-text":i.form.id>0?"Updating":"Inserting",color:"success"},{default:s(()=>[b(B(i.form.id>0?"Update":"Insert")+" Record",1)]),_:1},8,["onClick","disabled","loading","loading-text"])]),_:1})]),_:1})],32)]),_:1})]),_:1})}const j=N(S,[["render",J]]);export{j as default};
