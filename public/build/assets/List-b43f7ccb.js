import{d as y}from"./default-59bf48ce.js";import{S as _}from"./sweetalert2.all-8a4b642f.js";import{_ as w,e as x,w as s,r as i,o as k,a,b as g,t as h,n as p,d as C}from"./app-cc8f7264.js";const f=new y("contacts"),B={data(){return{roles:[],role_id:0,breadcrumbs:[{title:"Dashboard",to:{name:"auth.panel"},disabled:!1,exact:!0},{title:"Contact",exact:!0,disabled:!0,to:{name:"auth.contacts.listing"}}],serverItems:[],totalItems:0,loading:!1,itemsPerPage:10,search:"",headers:[{title:"Name",align:"start",sortable:!0,key:"name"},{title:"Email",align:"start",sortable:!0,key:"email"},{title:"Message",align:"start",sortable:!0,key:"message"},{title:"Actions",sortable:!1,key:"actions"}]}},methods:{async loadItems({page:n,itemsPerPage:r,sortBy:l}){this.loading=!0,this.serverItems=[];var o="";o+="?page="+n;try{l.length>0&&(o+="&sortCol="+l[0].key,o+="&sortByDesc="+l[0].order)}catch{}o+="&perpage="+r,this.search!=""&&(o+="&search="+this.search),this.role_id>0&&(o+="&role_id="+this.role_id);const t=await f.getlist(o);this.serverItems=t.data;try{this.totalItems=t.meta.total}catch{this.totalItems=0}this.loading=!1},async deleteItem(n){await _.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then(l=>{if(l.isConfirmed)return!0})&&(await f.delete({id:n}),_.fire("Deleted!","Your record has been deleted.","success"),this.loadItems({page:1,itemsPerPage:10}))}},watch:{$route(){this.loadItems({page:1,itemsPerPage:10})},itemsPerPage(){this.loadItems({page:1,itemsPerPage:10})},search(){this.loadItems({page:1,itemsPerPage:10})},role_id(){this.loadItems({page:1,itemsPerPage:10})}},async mounted(){this.loadItems({page:1,itemsPerPage:10})}},N=C("mdi-forward");function V(n,r,l,o,t,d){const m=i("v-icon"),b=i("v-breadcrumbs"),c=i("v-col"),v=i("v-text-field"),u=i("v-row"),P=i("v-btn"),I=i("v-data-table-server");return k(),x(u,null,{default:s(()=>[a(c,null,{default:s(()=>[a(b,{items:t.breadcrumbs},{prepend:s(()=>[a(m,{size:"small",icon:"mdi-home-city"})]),divider:s(()=>[a(m,null,{default:s(()=>[N]),_:1})]),_:1},8,["items"])]),_:1}),a(c,{cols:"12"},{default:s(()=>[a(u,null,{default:s(()=>[a(c,null,{default:s(()=>[a(v,{modelValue:t.search,"onUpdate:modelValue":r[0]||(r[0]=e=>t.search=e),label:"Search","single-line":"","hide-details":""},null,8,["modelValue"])]),_:1})]),_:1}),a(I,{"items-per-page":t.itemsPerPage,"onUpdate:items-per-page":r[1]||(r[1]=e=>t.itemsPerPage=e),headers:t.headers,"items-length":t.totalItems,items:t.serverItems,loading:t.loading,"item-value":"id","loading-text":"Loading","onUpdate:options":d.loadItems},{"item.is_active":s(({item:e})=>[g("div",{class:p({"green-background":e.selectable.is_active===1,"red-background":e.selectable.is_active!==1})},h(e.selectable.is_active===1?"Yes":"No"),3)]),"item.is_featured":s(({item:e})=>[g("div",{class:p({"green-background":e.selectable.is_featured===1,"red-background":e.selectable.is_featured!==1})},h(e.selectable.is_featured===1?"Yes":"No"),3)]),"item.actions":s(({item:e})=>[a(P,{onClick:Y=>d.deleteItem(e.selectable.id),color:"error",density:"comfortable",size:"small",icon:"mdi-delete-outline"},null,8,["onClick"])]),_:1},8,["items-per-page","headers","items-length","items","loading","onUpdate:options"])]),_:1})]),_:1})}const z=w(B,[["render",V]]);export{z as default};
