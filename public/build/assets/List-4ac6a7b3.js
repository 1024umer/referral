import{d as f}from"./default-b9ad43f8.js";import{S as p}from"./sweetalert2.all-f1b3b316.js";import{_ as y,e as I,w as s,r as i,o as w,a as e,d as u,t as x}from"./app-783ada3e.js";const g=new f("users"),k=new f("roles"),C={data(){return{roles:[],role_id:0,breadcrumbs:[{title:"Dashboard",to:{name:"auth.panel"},disabled:!1,exact:!0},{title:"Users",exact:!0,disabled:!0,to:{name:"auth.users.listing"}}],serverItems:[],totalItems:0,loading:!1,itemsPerPage:10,search:"",headers:[{title:"ID",align:"start",sortable:!0,key:"id"},{title:"Email",align:"start",sortable:!0,key:"email"},{title:"Name",align:"start",sortable:!0,key:"full_name"},{title:"State",align:"start",sortable:!0,key:"state"},{title:"Date of Birth",align:"start",sortable:!0,key:"dob"},{title:"Actions",sortable:!1,key:"actions"}]}},methods:{async loadItems({page:r,itemsPerPage:a,sortBy:n}){this.loading=!0,this.serverItems=[];var o="";o+="?page="+r;try{n.length>0&&(o+="&sortCol="+n[0].key,o+="&sortByDesc="+n[0].order)}catch{}o+="&perpage="+a,this.search!=""&&(o+="&search="+this.search),this.role_id>0&&(o+="&role_id="+this.role_id);const t=await g.getlist(o);this.serverItems=t.data;try{this.totalItems=t.meta.total}catch{this.totalItems=0}this.loading=!1},async deleteItem(r){await p.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then(n=>{if(n.isConfirmed)return!0})&&(await g.delete({id:r}),p.fire("Deleted!","Your record has been deleted.","success"),this.loadItems({page:1,itemsPerPage:10}))}},watch:{$route(){this.loadItems({page:1,itemsPerPage:10})},itemsPerPage(){this.loadItems({page:1,itemsPerPage:10})},search(){this.loadItems({page:1,itemsPerPage:10})},role_id(){this.loadItems({page:1,itemsPerPage:10})}},async mounted(){const r=await k.getlist("").then(a=>a.data);this.roles=[{id:0,title:"All"},...r],this.loadItems({page:1,itemsPerPage:10})}},B=u("mdi-forward"),D=u("Add User");function U(r,a,n,o,t,d){const _=i("v-icon"),b=i("v-breadcrumbs"),c=i("v-col"),m=i("v-btn"),v=i("v-text-field"),h=i("v-row"),P=i("v-data-table-server");return w(),I(h,null,{default:s(()=>[e(c,null,{default:s(()=>[e(b,{items:t.breadcrumbs},{prepend:s(()=>[e(_,{size:"small",icon:"mdi-home-city"})]),divider:s(()=>[e(_,null,{default:s(()=>[B]),_:1})]),_:1},8,["items"])]),_:1}),e(c,{cols:"1"},{default:s(()=>[e(m,{color:"success",link:"",to:{name:"auth.users.add"}},{default:s(()=>[D]),_:1},8,["to"])]),_:1}),e(c,{cols:"12"},{default:s(()=>[e(h,null,{default:s(()=>[e(c,null,{default:s(()=>[e(v,{modelValue:t.search,"onUpdate:modelValue":a[0]||(a[0]=l=>t.search=l),label:"Search","single-line":"","hide-details":""},null,8,["modelValue"])]),_:1})]),_:1}),e(P,{"items-per-page":t.itemsPerPage,"onUpdate:items-per-page":a[1]||(a[1]=l=>t.itemsPerPage=l),headers:t.headers,"items-length":t.totalItems,items:t.serverItems,loading:t.loading,"item-value":"id","loading-text":"Loading","onUpdate:options":d.loadItems},{"item.role_id":s(({item:l})=>[u(x(l.selectable.role.title),1)]),"item.actions":s(({item:l})=>[e(m,{link:"",to:{name:"auth.users.edit",params:{id:l.selectable.id}},color:"info",density:"comfortable",size:"small",icon:"mdi-pencil-plus"},null,8,["to"]),e(m,{onClick:S=>d.deleteItem(l.selectable.id),color:"error",density:"comfortable",size:"small",icon:"mdi-delete-outline"},null,8,["onClick"])]),_:1},8,["items-per-page","headers","items-length","items","loading","onUpdate:options"])]),_:1})]),_:1})}const N=y(C,[["render",U]]);export{N as default};
