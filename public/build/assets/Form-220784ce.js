import{d as p}from"./default-59bf48ce.js";import{_ as w,e as v,w as a,r as l,o as V,a as s,b as x,d as c,t as C,f as U}from"./app-cc8f7264.js";const d=new p("users"),y=new p("roles"),k={data(){return{roles:[],breadcrumbs:[{title:"Dashboard",to:{name:"auth.panel"},disabled:!1,exact:!0},{title:"Users",exact:!0,disabled:!1,to:{name:"auth.users.listing"}}],form:{role_id:"",name:"",email:"",password:"",image:[],id:0},loading:!1,errors:{role_id:[],name:[],email:[],password:[],image:[]}}},methods:{async insertRecord(){this.resetErrors(),this.loading=!0;var o=new FormData;if(o.append("name",this.form.name),o.append("email",this.form.email),o.append("role_id",this.form.role_id),this.form.id>0){o.append("id",this.form.id),this.form.password!=""&&o.append("password",this.form.password);var e=await d.update(o,this.form.id)}else{o.append("password",this.form.password);var e=await d.create(o)}e.status?this.$router.push({name:"auth.users.listing"}):(e.data.name&&(this.errors.name=e.data.name),e.data.email&&(this.errors.email=e.data.email),e.data.role_id&&(this.errors.role_id=e.data.role_id),e.data.image&&(this.errors.image=e.data.image),e.data.password&&(this.errors.password=e.data.password)),this.loading=!1},onFileChange(o){this.form.thumbnail=o.target.files[0]},resetErrors(){this.errors={role_id:[],name:[],email:[],password:[],image:[]}}},watch:{},async mounted(){if(this.roles=await y.getlist("").then(e=>e.data),this.$route.params.id){this.form.id=this.$route.params.id,this.breadcrumbs.push({title:"Edit",exact:!0,disabled:!0,to:{name:"auth.users.add",params:{id:this.$route.params.id}}});var o=await d.get(this.$route.params.id);this.form={name:o.name?o.name:"",email:o.email?o.email:"",role_id:o.role_id?o.role_id:"",id:this.$route.params.id}}else this.breadcrumbs.push({title:"Add",exact:!0,disabled:!0,to:{name:"auth.users.add"}})}},D=c("mdi-forward");function E(o,e,F,N,r,n){const u=l("v-icon"),_=l("v-breadcrumbs"),i=l("v-col"),m=l("v-text-field"),g=l("v-file-input"),h=l("v-select"),b=l("v-btn"),f=l("v-row");return V(),v(f,null,{default:a(()=>[s(i,{cols:"12"},{default:a(()=>[s(_,{items:r.breadcrumbs},{prepend:a(()=>[s(u,{size:"small",icon:"mdi-home-city"})]),divider:a(()=>[s(u,null,{default:a(()=>[D]),_:1})]),_:1},8,["items"])]),_:1}),s(i,{cols:"12"},{default:a(()=>[x("form",{onSubmit:e[5]||(e[5]=U((...t)=>o.submit&&o.submit(...t),["prevent"]))},[s(f,null,{default:a(()=>[s(i,{cols:"6"},{default:a(()=>[s(m,{modelValue:r.form.name,"onUpdate:modelValue":e[0]||(e[0]=t=>r.form.name=t),counter:255,label:"Name",required:"","error-messages":r.errors.name},null,8,["modelValue","error-messages"])]),_:1}),s(i,{cols:"6"},{default:a(()=>[s(m,{modelValue:r.form.email,"onUpdate:modelValue":e[1]||(e[1]=t=>r.form.email=t),counter:255,label:"Email",required:"","error-messages":r.errors.email},null,8,["modelValue","error-messages"])]),_:1}),s(i,{cols:"12"},{default:a(()=>[s(m,{modelValue:r.form.password,"onUpdate:modelValue":e[2]||(e[2]=t=>r.form.password=t),label:"Password",type:"password","error-messages":r.errors.password},null,8,["modelValue","error-messages"])]),_:1}),s(i,{cols:"6"},{default:a(()=>[s(g,{modelValue:r.form.image,"onUpdate:modelValue":e[3]||(e[3]=t=>r.form.image=t),counter:255,label:"Profile Image",required:"","error-messages":r.errors.image,onChange:n.onFileChange},null,8,["modelValue","error-messages","onChange"])]),_:1}),s(i,{cols:"6"},{default:a(()=>[s(h,{"error-messages":r.errors.role_id,"item-title":"title","item-value":"id",label:"Role",items:r.roles,modelValue:r.form.role_id,"onUpdate:modelValue":e[4]||(e[4]=t=>r.form.role_id=t)},null,8,["error-messages","items","modelValue"])]),_:1}),s(i,{cols:"12"},{default:a(()=>[s(b,{onClick:n.insertRecord,disabled:r.loading,loading:r.loading,"loading-text":r.form.id>0?"Updating":"Inserting",color:"success"},{default:a(()=>[c(C(r.form.id>0?"Update":"Insert")+" Record",1)]),_:1},8,["onClick","disabled","loading","loading-text"])]),_:1})]),_:1})],32)]),_:1})]),_:1})}const B=w(k,[["render",E]]);export{B as default};
