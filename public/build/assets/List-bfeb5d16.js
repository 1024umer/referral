import{d as p}from"./default-4d824ecd.js";import{S as h}from"./sweetalert2.all-d78efc0d.js";import{_ as w,e as y,w as t,r as l,o as x,a as s,d as c,t as g}from"./app-426106b2.js";const f=new p("referrals"),k=new p("roles"),C={data(){return{roles:[],role_id:0,breadcrumbs:[{title:"Dashboard",to:{name:"auth.users.listing"},disabled:!1,exact:!0},{title:"Referral",exact:!0,disabled:!0,to:{name:"auth.referrals.listing"}}],serverItems:[],totalItems:0,loading:!1,itemsPerPage:10,search:"",headers:[{title:"ID",align:"start",sortable:!0,key:"id"},{title:"Name",align:"start",sortable:!0,key:"full_name"},{title:"Email",align:"start",sortable:!0,key:"email"},{title:"State",align:"start",sortable:!0,key:"state"},{title:"Date of Birth",align:"start",sortable:!0,key:"dob"},{title:"Actions",sortable:!1,key:"actions"}]}},methods:{async loadItems({page:i,itemsPerPage:a,sortBy:n}){this.loading=!0,this.serverItems=[];var r="";r+="?page="+i;try{n.length>0&&(r+="&sortCol="+n[0].key,r+="&sortByDesc="+n[0].order)}catch{}r+="&perpage="+a,this.search!=""&&(r+="&search="+this.search),this.role_id>0&&(r+="&role_id="+this.role_id);const e=await f.getlist(r);this.serverItems=e.data;try{this.totalItems=e.meta.total}catch{this.totalItems=0}this.loading=!1},async deleteItem(i){await h.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then(n=>{if(n.isConfirmed)return!0})&&(await f.delete({id:i}),h.fire("Deleted!","Your record has been deleted.","success"),this.loadItems({page:1,itemsPerPage:10}))}},watch:{$route(){this.loadItems({page:1,itemsPerPage:10})},itemsPerPage(){this.loadItems({page:1,itemsPerPage:10})},search(){this.loadItems({page:1,itemsPerPage:10})},role_id(){this.loadItems({page:1,itemsPerPage:10})}},async mounted(){const i=await k.getlist("").then(a=>a.data);this.roles=[{id:0,title:"All"},...i],this.loadItems({page:1,itemsPerPage:10})}},B=c("mdi-forward");function D(i,a,n,r,e,m){const u=l("v-icon"),b=l("v-breadcrumbs"),d=l("v-col"),v=l("v-text-field"),_=l("v-row"),P=l("v-btn"),I=l("v-data-table-server");return x(),y(_,null,{default:t(()=>[s(d,null,{default:t(()=>[s(b,{items:e.breadcrumbs},{prepend:t(()=>[s(u,{size:"small",icon:"mdi-home-city"})]),divider:t(()=>[s(u,null,{default:t(()=>[B]),_:1})]),_:1},8,["items"])]),_:1}),s(d,{cols:"1"}),s(d,{cols:"12"},{default:t(()=>[s(_,null,{default:t(()=>[s(d,null,{default:t(()=>[s(v,{modelValue:e.search,"onUpdate:modelValue":a[0]||(a[0]=o=>e.search=o),label:"Search","single-line":"","hide-details":""},null,8,["modelValue"])]),_:1})]),_:1}),s(I,{"items-per-page":e.itemsPerPage,"onUpdate:items-per-page":a[1]||(a[1]=o=>e.itemsPerPage=o),headers:e.headers,"items-length":e.totalItems,items:e.serverItems,loading:e.loading,"item-value":"id","loading-text":"Loading","onUpdate:options":m.loadItems},{"item.role_id":t(({item:o})=>[c(g(o.selectable.role.title),1)]),"item.full_name":t(({item:o})=>[s(P,{link:"",to:{name:"auth.referrals.show",params:{id:o.selectable.id}}},{default:t(()=>[c(g(o.selectable.full_name),1)]),_:2},1032,["to"])]),_:1},8,["items-per-page","headers","items-length","items","loading","onUpdate:options"])]),_:1})]),_:1})}const A=w(C,[["render",D]]);export{A as default};
