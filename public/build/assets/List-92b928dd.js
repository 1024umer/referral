import{d as k}from"./default-59bf48ce.js";import{S as p}from"./sweetalert2.all-8a4b642f.js";import{_ as w,e as x,w as t,r as l,o as C,a as s,b as f,t as u,n as b,d as _}from"./app-cc8f7264.js";const v=new k("case-studies"),B={data(){return{roles:[],role_id:0,breadcrumbs:[{title:"Dashboard",to:{name:"auth.panel"},disabled:!1,exact:!0},{title:"Case Study",exact:!0,disabled:!0,to:{name:"auth.cases.listing"}}],serverItems:[],totalItems:0,loading:!1,itemsPerPage:10,search:"",headers:[{title:"ID",align:"start",sortable:!0,key:"id"},{title:"Title",align:"start",sortable:!0,key:"title"},{title:"Active",align:"start",sortable:!0,key:"is_active",class:"active-column"},{title:"Actions",sortable:!1,key:"actions"}]}},methods:{async loadItems({page:n,itemsPerPage:o,sortBy:r}){this.loading=!0,this.serverItems=[];var i="";i+="?page="+n;try{r.length>0&&(i+="&sortCol="+r[0].key,i+="&sortByDesc="+r[0].order)}catch{}i+="&perpage="+o,this.search!=""&&(i+="&search="+this.search),this.role_id>0&&(i+="&role_id="+this.role_id);const a=await v.getlist(i);this.serverItems=a.data;try{this.totalItems=a.meta.total}catch{this.totalItems=0}this.loading=!1},async deleteItem(n){await p.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then(r=>{if(r.isConfirmed)return!0})&&(await v.delete({id:n}),p.fire("Deleted!","Your record has been deleted.","success"),this.loadItems({page:1,itemsPerPage:10}))}},watch:{$route(){this.loadItems({page:1,itemsPerPage:10})},itemsPerPage(){this.loadItems({page:1,itemsPerPage:10})},search(){this.loadItems({page:1,itemsPerPage:10})},role_id(){this.loadItems({page:1,itemsPerPage:10})}},async mounted(){this.loadItems({page:1,itemsPerPage:10})}},S=_("mdi-forward"),V=_("Add Case Studies");function D(n,o,r,i,a,d){const g=l("v-icon"),P=l("v-breadcrumbs"),c=l("v-col"),m=l("v-btn"),I=l("v-text-field"),h=l("v-row"),y=l("v-data-table-server");return C(),x(h,null,{default:t(()=>[s(c,null,{default:t(()=>[s(P,{items:a.breadcrumbs},{prepend:t(()=>[s(g,{size:"small",icon:"mdi-home-city"})]),divider:t(()=>[s(g,null,{default:t(()=>[S]),_:1})]),_:1},8,["items"])]),_:1}),s(c,{cols:"1"},{default:t(()=>[s(m,{color:"success",link:"",to:{name:"auth.cases.add"}},{default:t(()=>[V]),_:1},8,["to"])]),_:1}),s(c,{cols:"12"},{default:t(()=>[s(h,null,{default:t(()=>[s(c,null,{default:t(()=>[s(I,{modelValue:a.search,"onUpdate:modelValue":o[0]||(o[0]=e=>a.search=e),label:"Search","single-line":"","hide-details":""},null,8,["modelValue"])]),_:1})]),_:1}),s(y,{"items-per-page":a.itemsPerPage,"onUpdate:items-per-page":o[1]||(o[1]=e=>a.itemsPerPage=e),headers:a.headers,"items-length":a.totalItems,items:a.serverItems,loading:a.loading,"item-value":"id","loading-text":"Loading","onUpdate:options":d.loadItems},{"item.is_active":t(({item:e})=>[f("div",{class:b({"green-background":e.selectable.is_active===1,"red-background":e.selectable.is_active!==1})},u(e.selectable.is_active===1?"Yes":"No"),3)]),"item.is_featured":t(({item:e})=>[f("div",{class:b({"green-background":e.selectable.is_featured===1,"red-background":e.selectable.is_featured!==1})},u(e.selectable.is_featured===1?"Yes":"No"),3)]),"item.role_id":t(({item:e})=>[_(u(e.selectable.role.title),1)]),"item.actions":t(({item:e})=>[s(m,{link:"",to:{name:"auth.cases.edit",params:{id:e.selectable.id}},color:"info",density:"comfortable",size:"small",icon:"mdi-pencil-plus"},null,8,["to"]),s(m,{onClick:N=>d.deleteItem(e.selectable.id),color:"error",density:"comfortable",size:"small",icon:"mdi-delete-outline"},null,8,["onClick"])]),_:1},8,["items-per-page","headers","items-length","items","loading","onUpdate:options"])]),_:1})]),_:1})}const U=w(B,[["render",D]]);export{U as default};
