import{d as U}from"./default-b9ad43f8.js";import"./sweetalert2.all-f1b3b316.js";import{_ as N,e as p,w as t,r as o,o as f,a,d as m,t as h}from"./app-783ada3e.js";const S=new U("users"),L={computed:{user(){return this.$store.getters.loggedInUser},leadStatuses(){return[{name:"All",id:0,bgClass:"",forGrid:!1},...this.$store.getters.getLeadStatuses]}},components:{},data(){return{lead_id:0,leadPopup:{dialog:!1,leadData:{}},serverItems:[],totalItems:0,loading:!1,itemsPerPage:10,search:"",headers:[{title:"ID",align:"start",sortable:!0,key:"id"},{title:"Full Name",align:"start",sortable:!0,key:"full_name"},{title:"State",align:"start",sortable:!0,key:"state"},{title:"Date of Birth",align:"start",sortable:!0,key:"dob"},{title:"Email",align:"start",sortable:!0,key:"email"}],modalOpen:!1,selectedUser:null,selectedContactOwner:null,contactOwners:[],users:[],form:{user_id:null}}},methods:{async loadItems({page:n,itemsPerPage:l,sortBy:u}){this.loading=!0,this.serverItems=[];var r="";r+="?page="+n;try{if(u.length>0){let i=u[0].key;(i="updated_at_formatted")&&(i="updated_at"),r+="&sortCol="+i,r+="&sortByDesc="+u[0].order}}catch{}r+="&perpage="+l,this.lead_id>0&&(r+="&lead_status="+this.lead_id),this.search!=""&&(r+="&search="+this.search),this.$route.query.is_client||(r+="&getall=true");const s=await S.getlist(r);this.serverItems=s.data;try{this.totalItems=s.meta.total}catch{this.totalItems=0}this.loading=!1}},watch:{$route(){this.$route.query.lead_status?parseInt(this.$route.query.lead_status)>0?this.lead_id=parseInt(this.$route.query.lead_status):this.lead_id=0:this.lead_id=0,this.loadItems({page:1,itemsPerPage:10})},itemsPerPage(){this.loadItems({page:1,itemsPerPage:10})},search(){this.loadItems({page:1,itemsPerPage:10})},lead_id(){this.loadItems({page:1,itemsPerPage:10})}},async mounted(){if(await this.fetchContactOwners(),this.loadItems({page:1,itemsPerPage:10}),this.$route.query.lead_id&&parseInt(this.$route.query.lead_id)>0){var n=this.$route.query.lead_id;itemtypeservice.get(n).then(l=>{this.showLeadPopupNew(l)})}this.$route.query.lead_status&&parseInt(this.$route.query.lead_status)>0&&(this.lead_id=parseInt(this.$route.query.lead_status))}},O=m("User Information");function D(n,l,u,r,s,i){const y=o("v-text-field"),d=o("v-col"),g=o("v-select"),_=o("v-row"),I=o("user-avatar"),v=o("v-badge"),P=o("v-btn"),b=o("v-data-table-server"),w=o("v-card-title"),k=o("v-card-text"),V=o("v-spacer"),x=o("v-card-actions"),q=o("v-card"),C=o("v-dialog");return f(),p(_,null,{default:t(()=>[a(d,{cols:"12"},{default:t(()=>[a(_,null,{default:t(()=>[a(d,null,{default:t(()=>[a(y,{"prepend-inner-icon":"mdi-magnify",modelValue:s.search,"onUpdate:modelValue":l[0]||(l[0]=e=>s.search=e),label:"Search Leads By First Name, Last Name, Email, Phone",variant:"underlined"},null,8,["modelValue"])]),_:1}),a(d,null,{default:t(()=>[a(g,{"item-title":"name","item-value":"id",label:"Leads Status",items:i.leadStatuses,modelValue:s.lead_id,"onUpdate:modelValue":l[1]||(l[1]=e=>s.lead_id=e)},null,8,["items","modelValue"])]),_:1})]),_:1}),a(b,{"items-per-page":s.itemsPerPage,"onUpdate:items-per-page":l[2]||(l[2]=e=>s.itemsPerPage=e),headers:s.headers,"items-length":s.totalItems,items:s.serverItems,loading:s.loading,"item-value":"id","loading-text":"Loading","onUpdate:options":i.loadItems},{"item.user_id":t(({item:e})=>[a(I,{user:e.selectable.user,onClick:c=>n.openModal(e.selectable.user)},null,8,["user","onClick"])]),"item.lead_status":t(({item:e})=>[m(h(i.leadStatuses.find(c=>c.id==e.selectable.lead_status).name),1)]),"item.client_id":t(({item:e})=>[e.selectable.client_id==0?(f(),p(v,{key:0,color:"error",content:"No",inline:""})):(f(),p(v,{key:1,color:"success",content:"Yes",inline:""}))]),"item.full_name":t(({item:e})=>[a(P,{onClick:c=>n.showLeadPopupNew(e.selectable),class:"text-decoration-underline",variant:"plain"},{default:t(()=>[m(h(e.selectable.full_name),1)]),_:2},1032,["onClick"])]),"item.email":t(({item:e})=>[m(h(e.selectable.email),1)]),_:1},8,["items-per-page","headers","items-length","items","loading","onUpdate:options"])]),_:1}),a(C,{modelValue:s.modalOpen,"onUpdate:modelValue":l[4]||(l[4]=e=>s.modalOpen=e),persistent:"","max-width":"400"},{default:t(()=>[a(q,null,{default:t(()=>[a(w,{class:"headline"},{default:t(()=>[O]),_:1}),a(k,null,{default:t(()=>[a(_,null,{default:t(()=>[a(d,null,{default:t(()=>[a(d,{cols:"12"},{default:t(()=>[a(g,{"item-title":"name","item-value":"id",label:"User*",items:s.users,modelValue:s.form.user_id,"onUpdate:modelValue":l[3]||(l[3]=e=>s.form.user_id=e)},null,8,["items","modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),a(x,null,{default:t(()=>[a(V)]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})}const A=N(L,[["render",D],["__scopeId","data-v-03ea52d3"]]);export{A as default};
